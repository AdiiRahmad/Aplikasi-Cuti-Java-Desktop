CREATE TABLE  "CUTI" 
   (	"ID_CUTI" CHAR(4), 
	"JENIS_CUTI" VARCHAR2(10), 
	"DURASI" NUMBER, 
	 CONSTRAINT "CUTI_PK" PRIMARY KEY ("ID_CUTI") ENABLE
   ) ;

CREATE TABLE  "DETAIL_CUTI" 
   (	"ID_CUTI" CHAR(4), 
	"NIK" CHAR(4), 
	"TANGGAL_MULAI" DATE, 
	"TANGGAL_SELESAI" DATE, 
	"LAMA_CUTI" NUMBER, 
	"STATUS" VARCHAR2(15), 
	"KETERANGAN" VARCHAR2(30), 
	"ID_DETAILCUTI" CHAR(4), 
	 CONSTRAINT "DETAIL_CUTI_PK" PRIMARY KEY ("ID_DETAILCUTI") ENABLE
   ) ;ALTER TABLE  "DETAIL_CUTI" ADD CONSTRAINT "MASTERCUTI_FK" FOREIGN KEY ("ID_CUTI")
	  REFERENCES  "CUTI" ("ID_CUTI") ENABLE;ALTER TABLE  "DETAIL_CUTI" ADD CONSTRAINT "MASTERCUTI_FK1" FOREIGN KEY ("NIK")
	  REFERENCES  "KARYAWAN" ("NIK") ENABLE;

CREATE OR REPLACE TRIGGER  "SISA" 
after insert on Detail_Cuti
for each row 
begin 
IF (:new.Status)='Diterima' then
update Karyawan set Sisa_Cuti = Sisa_Cuti -:new.Lama_Cuti
where NIK = :new.NIK;

end if;

end;
/

CREATE TABLE  "JABATAN" 
   (	"ID_JABATAN" CHAR(4), 
	"JABATAN" VARCHAR2(15), 
	"ID_PIMPINAN" CHAR(4), 
	 CONSTRAINT "ID_JABATAN_PK" PRIMARY KEY ("ID_JABATAN") ENABLE
   ) ;

CREATE TABLE  "KARYAWAN" 
   (	"NIK" CHAR(4), 
	"NAMA" VARCHAR2(20), 
	"AGAMA" VARCHAR2(10), 
	"ALAMAT" VARCHAR2(25), 
	"TANGGAL_LAHIR" DATE, 
	"TGL_MULAI_KERJA" DATE, 
	"JENIS_KELAMIN" VARCHAR2(10), 
	"SISA_CUTI" NUMBER, 
	 CONSTRAINT "KARYAWAN_PK" PRIMARY KEY ("NIK") ENABLE
   ) ;